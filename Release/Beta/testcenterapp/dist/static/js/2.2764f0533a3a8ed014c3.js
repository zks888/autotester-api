webpackJsonp([2],{"7Zj+":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("gRE1"),n=a.n(s),l={data:function(){return{themetitle:[],tableData:[],multipleSelection:[],indexRow:"",pagecount:0,theme:{value:"",mastrNm:"",tableNm:""},seen:!1,selectData:[],saveType:-1}},created:function(){this.selectTableName()},methods:{managerTable:function(){var e=this,t=this.theme.tableNm;if(0===t)return this.$message.warning("请选择表名!"),!1;this.seen=!0,this.mangerTable(t).then(function(t){200===t.status&&(4===t.data.result?(e.tableData=t.data.data,e.pagecount=t.data.pageNo,e.tableData=t.data.data):e.$message.error(t.data.msg))})},selectTableName:function(){var e=this;this.registerList().then(function(t){t.data.data.forEach(function(t){e.themetitle.push({mastrNm:t.bmtMastrNm,tableNm:t.bmtTableNm,value:t.bmtMastrId})})})},addRow:function(){return 0===this.tableData.length?(this.$message.warning("请选择表名!"),!1):1===this.saveType?(this.$message.warning("请先保存当前编辑项"),!1):(this.tableData.push({seen:!0}),void(this.saveType=0))},handleEdit:function(){return 0===this.tableData.length?(this.$message.warning("请选择表名!"),!1):0===this.saveType?(this.selectData=[],this.$message.warning("请先保存当前编辑项"),!1):0===this.multipleSelection.length?(this.$message.warning("请选择修改数据"),!1):(this.saveType=1,void(this.selectData=this.multipleSelection))},handleDel:function(){var e=this,t=this.multipleSelection.map(function(t){return{tableName:e.theme.tableNm,values:n()(t)}});this.delTable(t).then(function(t){4===t.data.result?(e.managerTable(),e.$message.success("删除成功")):e.$message.error(t.data.msg)})},hanleSave:function(){var e=this;if(0===this.saveType){var t=this.tableData.filter(function(e){if(!0===e.seen)return delete e.seen,!0}).map(function(t){return{tableName:e.theme.tableNm,values:n()(t)}});this.addTable(t).then(function(t){4===t.data.result?(e.saveType=-1,e.selectData=[],e.$message.success("保存成功！")):e.$message.error(t.data.msg)})}else if(1===this.saveType){var a=this.selectData.map(function(t){return{tableName:e.theme.tableNm,values:n()(t)}});this.editTable(a).then(function(t){4===t.data.result?(e.selectData=[],e.saveType=-1,e.$message.success("保存成功！")):e.$message.error(t.data.msg)})}},handleSelectionChange:function(e){this.multipleSelection=e},handleSizeChange:function(e){}}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("div",{staticClass:"headerWrap"},[a("el-form",{attrs:{inline:!0,"label-position":"left"}},[a("el-form-item",{attrs:{label:"Table Name"}},[a("el-select",{staticClass:"tablenameWrap",attrs:{placeholder:"请选择表名",size:"medium"},model:{value:e.theme,callback:function(t){e.theme=t},expression:"theme"}},[a("el-option",{attrs:{value:e.item}},[e._v("11111")]),e._v(" "),e._l(e.themetitle,function(e){return a("el-option",{key:e.value,attrs:{label:e.mastrNm,value:e}})})],2)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:e.managerTable}},[e._v("查询")])],1)],1)],1),e._v(" "),a("div",{staticClass:"updateDataWrap"},[a("el-button",{attrs:{size:"medium",type:"primary"},on:{click:e.addRow}},[e._v("新增")]),e._v(" "),a("el-button",{attrs:{size:"medium",type:"primary"},on:{click:e.handleEdit}},[e._v("修改")]),e._v(" "),a("el-button",{attrs:{size:"medium",type:"primary"},on:{click:e.hanleSave}},[e._v("保存")]),e._v(" "),a("el-button",{attrs:{size:"medium",type:"danger"},on:{click:e.handleDel}},[e._v("删除")])],1)]),e._v(" "),a("div",[[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,"tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[e.seen?a("el-table-column",{attrs:{type:"selection"}}):e._e(),e._v(" "),e._l(e.tableData[0],function(t,s,n){return a("el-table-column",{key:n,attrs:{label:s},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form",{ref:"scope.row[key]",refInFor:!0,attrs:{rules:e.rules}},[t.row.seen?a("span",[a("el-input",{attrs:{size:"medium",type:"text"},model:{value:t.row[s],callback:function(a){e.$set(t.row,s,a)},expression:"scope.row[key]"}})],1):e._e(),e._v(" "),-1==e.selectData.indexOf(t.row)?a("span",[e._v(e._s(t.row[s]))]):a("span",["PROD_ID"!=s?a("el-input",{attrs:{size:"medium",type:"text"},model:{value:t.row[s],callback:function(a){e.$set(t.row,s,a)},expression:"scope.row[key]"}}):a("span",[e._v(e._s(t.row[s]))])],1)])]}}],null,!0)})})],2),e._v("\n      "+e._s(e.tableData)+"\n      "),a("div",{staticClass:"block",staticStyle:{"margin-top":"20px","text-align":"center"}},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next","page-count":e.pagecount}})],1)]],2)])},staticRenderFns:[]};var r=a("VU/8")(l,i,!1,function(e){a("Ydii")},"data-v-3de288e0",null);t.default=r.exports},TmV0:function(e,t,a){a("fZOM"),e.exports=a("FeBl").Object.values},Ydii:function(e,t){},fZOM:function(e,t,a){var s=a("kM2E"),n=a("mbce")(!1);s(s.S,"Object",{values:function(e){return n(e)}})},gRE1:function(e,t,a){e.exports={default:a("TmV0"),__esModule:!0}},mbce:function(e,t,a){var s=a("lktj"),n=a("TcQ7"),l=a("NpIQ").f;e.exports=function(e){return function(t){for(var a,i=n(t),r=s(i),o=r.length,u=0,c=[];o>u;)l.call(i,a=r[u++])&&c.push(e?[a,i[a]]:i[a]);return c}}}});
//# sourceMappingURL=2.2764f0533a3a8ed014c3.js.map